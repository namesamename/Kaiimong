using UnityEngine;
using TMPro;
using UnityEngine.UI;

public class TopBarUI : MonoBehaviour
{

    private TextMeshProUGUI[] CountText;
    Button button;

    // 플레이어의 데이터

    private int playerstamina;
    private int playergold;
    private int playercrystal;
    //플레이어 데이터 가지고 오는 코드 , playerdata.gold 등등

    private void Start()
    {
        UpdateResource();
        ShowResource();
        // 시작 시 한 번 갱신해서 보이게


    }


    public void ButtonSet()
    {
        button = GetComponentInChildren<Button>();
        button.onClick.RemoveAllListeners();
        button.onClick.AddListener(() => UIManager.Instance.ShowPopup("StaminaChargePOPUP"));
    }
    public void UpdateResource() // 추후 매개변수를 제거하고 받아온 데이터를 가지고 이동시키기
    {
        playerstamina = CurrencyManager.Instance.GetCurrency(CurrencyType.Activity);
        playergold = CurrencyManager.Instance.GetCurrency(CurrencyType.Gold);
        playercrystal = CurrencyManager.Instance.GetCurrency(CurrencyType.Dia);
    }

    public void ShowResource()
    {
        CountText = GetComponentsInChildren<TextMeshProUGUI>();
        CountText[0].text = $"Stamina: {playerstamina} / {GlobalDataTable.Instance.currency.CurrencyDic[CurrencyType.Activity].MaxCount}";
        CountText[1].text = $"Gold: {playergold} / {GlobalDataTable.Instance.currency.CurrencyDic[CurrencyType.Gold].MaxCount}";
        CountText[2].text = $"Crystal: {playercrystal} / {GlobalDataTable.Instance.currency.CurrencyDic[CurrencyType.Dia].MaxCount}";
    }
}
